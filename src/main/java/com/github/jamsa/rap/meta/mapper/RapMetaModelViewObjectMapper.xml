<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.github.jamsa.rap.meta.mapper.RapMetaModelViewObjectMapper">
  <resultMap id="BaseResultMap" type="com.github.jamsa.rap.meta.model.RapMetaModelViewObject">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    <id column="VIEW_OBJECT_ID" jdbcType="INTEGER" property="viewObjectId" />
    <id column="MODEL_ID" jdbcType="INTEGER" property="modelId" />
    <result column="VIEW_TYPE" jdbcType="VARCHAR" property="viewType" />
    <result column="UPDATABLE" jdbcType="VARCHAR" property="updatable" />
    <result column="DELETABLE" jdbcType="VARCHAR" property="deletable" />
    <result column="CREATABLE" jdbcType="VARCHAR" property="creatable" />
    <result column="REL_FIELD_ID" jdbcType="INTEGER" property="relFieldId" />
    <result column="VIEW_ALIAS" jdbcType="VARCHAR" property="viewAlias" />

    <result column="TABLE_ID" jdbcType="INTEGER" property="tableId" />
    <result column="OBJECT_CODE" jdbcType="VARCHAR" property="objectCode" />
    <result column="CREATED_BY" jdbcType="INTEGER" property="createdBy" />
    <result column="CREATION_DATE" jdbcType="TIMESTAMP" property="creationDate" />
    <result column="LAST_UPDATE_DATE" jdbcType="TIMESTAMP" property="lastUpdateDate" />
    <result column="LAST_UPDATED_BY" jdbcType="INTEGER" property="lastUpdatedBy" />
    <result column="OBJECT_NAME" jdbcType="VARCHAR" property="objectName" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.github.jamsa.rap.meta.model.RapMetaModelViewObject">
    <result column="OBJECT_SQL" jdbcType="LONGVARCHAR" property="objectSql" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    VIEW_OBJECT_ID, MODEL_ID, VIEW_TYPE, UPDATABLE, DELETABLE, CREATABLE, REL_FIELD,VIEW_ALIAS
  </sql>
  <select id="selectByPrimaryKey" parameterType="com.github.jamsa.rap.meta.model.RapMetaModelViewObjectKey" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from RAP_META_MODEL_OBJECT
    where VIEW_OBJECT_ID = #{viewObjectId,jdbcType=INTEGER}
      and MODEL_ID = #{modelId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.github.jamsa.rap.meta.model.RapMetaModelViewObjectKey">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    delete from RAP_META_MODEL_OBJECT
    where VIEW_OBJECT_ID = #{viewObjectId,jdbcType=INTEGER}
      and MODEL_ID = #{modelId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.github.jamsa.rap.meta.model.RapMetaModelViewObject">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    insert into RAP_META_MODEL_OBJECT (VIEW_OBJECT_ID, MODEL_ID, VIEW_TYPE, VIEW_ALIAS,
      UPDATABLE, DELETABLE, CREATABLE, 
      REL_FIELD_ID)
    values (#{viewObjectId,jdbcType=INTEGER}, #{modelId,jdbcType=INTEGER}, #{viewType,jdbcType=VARCHAR},#{viewAlias,jdbcType=VARCHAR},
    #{updatable,jdbcType=VARCHAR}, #{deletable,jdbcType=VARCHAR}, #{creatable,jdbcType=VARCHAR},
      #{relFieldId,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.github.jamsa.rap.meta.model.RapMetaModelViewObject">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    insert into RAP_META_MODEL_OBJECT
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="changedProperties.containsKey('viewObjectId')">
        VIEW_OBJECT_ID,
      </if>
      <if test="changedProperties.containsKey('modelId')">
        MODEL_ID,
      </if>
      <if test="changedProperties.containsKey('viewType')">
        VIEW_TYPE,
      </if>
      <if test="changedProperties.containsKey('viewAlias')">
        VIEW_ALIAS,
      </if>
      <if test="changedProperties.containsKey('updatable')">
        UPDATABLE,
      </if>
      <if test="changedProperties.containsKey('deletable')">
        DELETABLE,
      </if>
      <if test="changedProperties.containsKey('creatable')">
        CREATABLE,
      </if>
      <if test="changedProperties.containsKey('relFieldId')">
        REL_FIELD_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="changedProperties.containsKey('viewObjectId')">
        #{viewObjectId,jdbcType=INTEGER},
      </if>
      <if test="changedProperties.containsKey('modelId')">
        #{modelId,jdbcType=INTEGER},
      </if>
      <if test="changedProperties.containsKey('viewType')">
        #{viewType,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('viewAlias')">
        #{viewAlias,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('updatable')">
        #{updatable,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('deletable')">
        #{deletable,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('creatable')">
        #{creatable,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('relFieldId')">
        #{relFieldId,jdbcType=DECIMAL},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.github.jamsa.rap.meta.model.RapMetaModelViewObject">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    update RAP_META_MODEL_OBJECT
    <set>
      <if test="changedProperties.containsKey('viewType')">
        VIEW_TYPE = #{viewType,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('viewAlias')">
        VIEW_ALIAS = #{viewAlias,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('updatable')">
        UPDATABLE = #{updatable,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('deletable')">
        DELETABLE = #{deletable,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('creatable')">
        CREATABLE = #{creatable,jdbcType=VARCHAR},
      </if>
      <if test="changedProperties.containsKey('relFieldId')">
        REL_FIELD_ID = #{relFieldId,jdbcType=DECIMAL},
      </if>
    </set>
    where VIEW_OBJECT_ID = #{viewObjectId,jdbcType=INTEGER}
      and MODEL_ID = #{modelId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.github.jamsa.rap.meta.model.RapMetaModelViewObject">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 13 19:35:54 CST 2018.
    -->
    update RAP_META_MODEL_OBJECT
    set VIEW_TYPE = #{viewType,jdbcType=VARCHAR},
    VIEW_ALIAS = #{viewAlias,jdbcType=VARCHAR},
      UPDATABLE = #{updatable,jdbcType=VARCHAR},
      DELETABLE = #{deletable,jdbcType=VARCHAR},
      CREATABLE = #{creatable,jdbcType=VARCHAR},
      REL_FIELD_ID = #{relFieldId,jdbcType=INTEGER}
    where VIEW_OBJECT_ID = #{viewObjectId,jdbcType=INTEGER}
      and MODEL_ID = #{modelId,jdbcType=INTEGER}
  </update>
  <select id="selectByCondition" parameterType="com.github.jamsa.rap.meta.model.RapMetaModelViewObject" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
    -->
    select
    <include refid="Base_Column_List" />
    from RAP_META_MODEL_OBJECT
    <trim prefix=" where " suffixOverrides="and">
      <if test="changedProperties.containsKey('viewObjectId')">
        VIEW_OBJECT_ID = #{viewObjectId, jdbcType=INTEGER} and
      </if>
      <if test="changedProperties.containsKey('modelId')">
        MODEL_ID = #{modelId, jdbcType=INTEGER} and
      </if>
      <if test="changedProperties.containsKey('viewType')">
        VIEW_TYPE like concat(concat('%',#{viewType, jdbcType=VARCHAR}),'%') and 
      </if>
      <if test="changedProperties.containsKey('viewAlias')">
        VIEW_ALIAS like concat(concat('%',#{viewAlias, jdbcType=VARCHAR}),'%') and
      </if>
      <if test="changedProperties.containsKey('updatable')">
        UPDATABLE like concat(concat('%',#{updatable, jdbcType=VARCHAR}),'%') and 
      </if>
      <if test="changedProperties.containsKey('deletable')">
        DELETABLE like concat(concat('%',#{deletable, jdbcType=VARCHAR}),'%') and 
      </if>
      <if test="changedProperties.containsKey('creatable')">
        CREATABLE like concat(concat('%',#{creatable, jdbcType=VARCHAR}),'%') and 
      </if>
      <if test="changedProperties.containsKey('relFieldId')">
        REL_FIELD = #{relFieldId, jdbcType=INTEGER} and
      </if>
    </trim>
  </select>

  <select id="selectByModelId" parameterType="java.lang.Long" resultMap="ResultMapWithBLOBs">
    select
      mo.VIEW_OBJECT_ID,
      mo.MODEL_ID,
      mo.VIEW_TYPE,
      mo.VIEW_ALIAS,
      mo.UPDATABLE,
      mo.DELETABLE,
      mo.CREATABLE,
      mo.REL_FIELD_ID,

      vo.APP_ID,
      vo.TABLE_NAME,
      vo.TABLE_CODE,
      vo.OBJECT_CODE,
      vo.OBJECT_SQL,
      vo.CREATED_BY,
      vo.CREATION_DATE,
      vo.LAST_UPDATE_DATE,
      vo.LAST_UPDATED_BY,
      vo.OBJECT_NAME
    from RAP_META_MODEL_OBJECT mo,RAP_META_VIEW_OBJECT vo
    where mo.view_object_id=vo.view_object_id
    and mo.model_id=#{modelId, jdbcType=INTEGER}
  </select>

</mapper>